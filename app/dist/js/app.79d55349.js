(function(e){function t(t){for(var n,i,o=t[0],s=t[1],l=t[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],n=!0,i=1;i<c.length;i++){var s=c[i];0!==a[s]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=c[0]))}return e}var n={},a={app:0},r=[];function i(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"805532d5"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.e=function(e){var t=[],c=a[e];if(0!==c)if(c)t.push(c[2]);else{var n=new Promise((function(t,n){c=a[e]=[t,n]}));t.push(c[2]=n);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=i(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(u);var c=a[e];if(0!==c){if(c){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,c[1](l)}a[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,c){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(c,n,function(t){return e[t]}.bind(null,n));return c},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/chapter-one-reading-list/",o.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var b=l;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},1727:function(e,t,c){e.exports=c.p+"img/twitter-logo.7571ea13.png"},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},abe2:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=c("5a0c"),r=c.n(a),i=c("313d"),o=c("3b13"),s=c("64b9"),l=c("c657");const u={version:"0.1.0",name:"chapter_one_reading_list",instructions:[{name:"addArticle",accounts:[{name:"article",isMut:!0,isSigner:!0},{name:"collector",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"link",type:"string"}]},{name:"deleteArticle",accounts:[{name:"article",isMut:!0,isSigner:!1},{name:"collector",isMut:!0,isSigner:!0}],args:[]}],accounts:[{name:"article",type:{kind:"struct",fields:[{name:"collector",type:"publicKey"},{name:"timestamp",type:"i64"},{name:"link",type:"string"}]}}],errors:[{code:6e3,name:"ArticleLinkTooLong",msg:"The provided article link should be 200 characters long maximum."},{code:6001,name:"MissingArticleLink",msg:"An article link must be provided."}]};var b;const d=new s["PublicKey"](null!==(b="2Nn7j2iepkGYBXaRgiq5fHvkqLS9rvMvSBNpGHBavHgu")&&void 0!==b?b:"");let p;const j="https://api.devnet.solana.com",O="processed",m="processed";function h(){return p}const v=()=>{const e=Object(i["c"])(),t=new s["Connection"](j,m),c=Object(n["c"])(()=>new l["a"](t,e.value,{preflightCommitment:O,commitment:m})),a=Object(n["c"])(()=>new l["b"](u,d,c.value));p={wallet:e,connection:t,provider:c,program:a}};function g(e){const t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;return t.test(e)}const f={class:"navbar navbar-expand-md bg-light"},y={class:"container-fluid"},k=Object(n["h"])("a",{class:"navbar-brand",href:"#"},"Chapter One Reading List",-1),w=Object(n["h"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#menu","aria-controls":"menu","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(n["h"])("i",{class:"fa-solid fa-bars"})],-1),A={class:"collapse navbar-collapse justify-content-md-between",id:"menu"},_={class:"navbar-nav d-flex"},z=Object(n["j"])("Home"),P=Object(n["j"])("About"),x={class:"d-none d-md-flex"},L={class:"d-md-none"},S={class:"container-fluid"},C={class:"position-fixed bottom-0 bg-light container-fluid d-flex justify-content-between"},H={class:"p-0 m-0 pt-2"},T=Object(n["h"])("a",{href:"https://chapterone.com/"},"chapterone.com",-1),K=Object(n["i"])('<nav class="nav"><a href="https://github.com/chapter-one-dev/chapter-one-reading-list" class="nav-link"><i class="fa-brands fa-github"></i></a><a href="https://twitter.com/chapterone" class="nav-link"><i class="fa-brands fa-twitter"></i></a></nav>',1);var M=Object(n["l"])({__name:"App",setup(e){const t=[new o["PhantomWalletAdapter"],new o["SolflareWalletAdapter"]];Object(i["b"])({wallets:t,autoConnect:!0}),v();const c=r()().year();return(e,t)=>{const a=Object(n["F"])("router-link"),r=Object(n["F"])("router-view");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("header",null,[Object(n["h"])("nav",f,[Object(n["h"])("div",y,[k,w,Object(n["h"])("div",A,[Object(n["h"])("div",_,[Object(n["k"])(a,{to:"/",class:"nav-link"},{default:Object(n["N"])(()=>[z]),_:1}),Object(n["k"])(a,{to:"/about",class:"nav-link"},{default:Object(n["N"])(()=>[P]),_:1})]),Object(n["h"])("div",x,[Object(n["k"])(Object(n["J"])(i["a"]))])])])]),Object(n["h"])("div",L,[Object(n["k"])(Object(n["J"])(i["a"]))])]),Object(n["h"])("main",S,[Object(n["k"])(r)]),Object(n["h"])("footer",C,[Object(n["h"])("p",H,[Object(n["j"])("Â© "+Object(n["H"])(Object(n["J"])(c))+" ",1),T]),K])],64)}}});const R=M;var J=R,U=c("6605"),q=c("5502"),B=c("4208"),N=c.n(B);r.a.extend(N.a);class I{constructor(e,t){this.publicKey=e,this.collector=t.collector,this.timestamp=r.a.unix(parseInt(t.timestamp.toString())),this.link=t.link}get key(){return this.publicKey.toBase58()}get collector_display(){const e=this.collector.toBase58();return e.slice(0,4)+".."+e.slice(-4)}get added_date(){return this.timestamp.format("MMM D, YYYY")}get created_ago(){return this.timestamp.fromNow()}}var Y=c("1727"),G=c.n(Y);const V={key:0,class:"card-body"},D=["src","alt"],E={key:1,class:"card-img-top",src:G.a,alt:"Twitter Article"},F={class:"card-body"},W={key:0,class:"card-title"},X={key:1,class:"card-title"},Z={key:2,class:"card-title"},$={key:3,class:"card-text"},Q={key:1};function ee(e,t,c,a,r,i){return e.response&&e.validURL?(Object(n["z"])(),Object(n["g"])("div",V,[e.response.image?(Object(n["z"])(),Object(n["g"])("img",{key:0,class:"card-img-top",src:e.response.image,alt:e.response.title},null,8,D)):"twitter"==e.altImage?(Object(n["z"])(),Object(n["g"])("img",E)):Object(n["f"])("",!0),Object(n["h"])("div",F,[e.response.title?(Object(n["z"])(),Object(n["g"])("h1",W,Object(n["H"])(e.response.title),1)):"twitter"===e.altTitle?(Object(n["z"])(),Object(n["g"])("h1",X,"Thread by @"+Object(n["H"])(e.getTwitterHandle(e.link)),1)):(Object(n["z"])(),Object(n["g"])("h1",Z,Object(n["H"])(e.link),1)),e.response.description?(Object(n["z"])(),Object(n["g"])("p",$,Object(n["H"])(e.response.description),1)):Object(n["f"])("",!0)])])):(Object(n["z"])(),Object(n["g"])("div",Q,"Loading Preview"))}c("caad");var te=Object(n["l"])({name:"ArticleCard",props:{apiURL:{type:String,default:"https://link-prevue-api-v2.herokuapp.com/preview/"},link:{type:String,required:!0}},watch:{url:function(){this.response=null,this.getLinkPreview()}},created(){this.getLinkPreview()},data(){return{response:null,validURL:!1}},computed:{altImage(){return this.response&&!this.response.image?this.link.includes("https://twitter.com")?"twitter":"":void 0},altTitle(){return this.response&&!this.response.image?this.link.includes("https://twitter.com")?"twitter":"":void 0}},methods:{getTwitterHandle(e){const t=e.slice("https://twitter.com/".length),c=t.split("/");return c[0]},checkValidURL(e){return this.validURL=g(e),this.validURL},getLinkPreview(){this.checkValidURL(this.link)&&this.httpRequest(e=>{this.response=JSON.parse(e)},()=>{this.response=null,this.validURL=!1})},httpRequest(e,t){const c=new XMLHttpRequest,n="url="+this.link;c.open("POST",this.apiURL,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&e(c.responseText),4===c.readyState&&500===c.status&&t()},c.send(n)}}}),ce=c("6b0d"),ne=c.n(ce);const ae=ne()(te,[["render",ee]]);var re=ae;async function ie(e){const{wallet:t,program:c}=h(),n={article:e.publicKey,collector:t.value.publicKey,systemProgram:c.value.programId};try{await c.value.methods.deleteArticle().accounts(n).rpc()}catch(a){return console.log(a),!1}return!0}const oe={class:"card"},se={class:"card-body"},le=["href"],ue=["href"],be=Object(n["l"])({name:"ArticleCard",props:{article:{type:I,required:!0}},components:{LinkPreview:re},methods:{async deleteThisArticle(){const e=await ie(this.article);return this.remove(this.article),e},...Object(q["b"])({remove:"deleteArticle"})}});var de=Object(n["l"])({...be,setup(e){const{wallet:t}=h();return(e,c)=>(Object(n["z"])(),Object(n["g"])("div",oe,[Object(n["k"])(re,{link:e.article.link},null,8,["link"]),Object(n["h"])("div",se,[Object(n["h"])("a",{href:e.article.link,class:"btn btn-secondary",target:"_blank"},"Go to article!",8,le),Object(n["h"])("p",null,[Object(n["j"])("Added "+Object(n["H"])(e.article.created_ago)+" by ",1),Object(n["h"])("a",{href:`https://explorer.solana.com/address/${e.article.collector.toString()}?cluster=devnet`},Object(n["H"])(e.article.collector_display),9,ue)]),Object(n["J"])(t)&&Object(n["J"])(t).publicKey&&Object(n["J"])(t).publicKey.toBase58()==e.article.collector.toBase58()?(Object(n["z"])(),Object(n["g"])("button",{key:0,onClick:c[0]||(c[0]=(...t)=>e.deleteThisArticle&&e.deleteThisArticle(...t)),class:"btn btn-danger"}," Delete Article ")):Object(n["f"])("",!0)])]))}});const pe=de;var je=pe;const Oe={class:"container"},me={key:0},he={key:1,class:"row"};var ve=Object(n["l"])({__name:"ArticleGrid",setup(e){const t=Object(q["c"])(),c=Object(n["C"])(!0);t.dispatch("loadArticles").finally(()=>c.value=!1);const a=Object(n["c"])(()=>{const e=t.getters.getArticles;return console.log(e),e.slice(0).sort((e,t)=>t.timestamp.millisecond()-e.timestamp.millisecond())});return(e,t)=>(Object(n["z"])(),Object(n["g"])("section",Oe,[c.value?(Object(n["z"])(),Object(n["g"])("div",me,"Loading articles...")):(Object(n["z"])(),Object(n["g"])("div",he,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(Object(n["J"])(a),e=>(Object(n["z"])(),Object(n["g"])("div",{key:e.publicKey.toBase58(),class:"col-md-4"},[Object(n["k"])(je,{article:e},null,8,["article"])]))),128))]))]))}});const ge=ve;var fe=ge;async function ye(e){var t;const{wallet:c,program:n}=h(),a=l["c"].Keypair.generate();await n.value.methods.addArticle(e).accounts({collector:null===(t=c.value)||void 0===t?void 0:t.publicKey,article:a.publicKey,systemProgram:l["c"].SystemProgram.programId}).signers([a]).rpc();const r=await n.value.account.article.fetch(a.publicKey);return new I(a.publicKey,r)}const ke={class:"container"},we={class:"col m-5"},Ae={class:"input-group flex-nowrap"},_e=Object(n["h"])("label",{for:"link",class:"input-group-text"},"Link",-1),ze={class:"row"},Pe=["onClick"],xe=["onClick","disabled"],Le=["onClick"],Se={key:0,class:"col-4"};var Ce=Object(n["l"])({__name:"AddArticleForm",setup(e){const t=Object(q["c"])(),c=Object(n["C"])(""),a=Object(n["C"])(!1),r=Object(n["c"])(()=>g(c.value));async function i(){const e=await ye(c.value);c.value="",t.commit("addArticle",e)}function o(){a.value=!a.value}return(e,t)=>(Object(n["z"])(),Object(n["g"])("div",ke,[Object(n["h"])("form",we,[Object(n["h"])("div",Ae,[_e,Object(n["O"])(Object(n["h"])("input",{id:"link",class:"form-control",placeholder:"https://mirror.xyz/","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e)},null,512),[[n["K"],c.value]])]),Object(n["h"])("div",ze,[Object(n["h"])("button",{class:"btn btn-primary col m-2",onClick:Object(n["P"])(i,["prevent"])},"Add Article",8,Pe),a.value?(Object(n["z"])(),Object(n["g"])("button",{key:1,class:"btn btn-secondary col m-2",onClick:Object(n["P"])(o,["prevent"])},"Hide Preview",8,Le)):(Object(n["z"])(),Object(n["g"])("button",{key:0,class:"btn btn-secondary col m-2",onClick:Object(n["P"])(o,["prevent"]),disabled:!Object(n["J"])(r)},"Show Preview",8,xe))])]),a.value?(Object(n["z"])(),Object(n["g"])("aside",Se,[Object(n["k"])(re,{link:c.value},null,8,["link"])])):Object(n["f"])("",!0)]))}});const He=Ce;var Te=He;const Ke={key:0},Me={key:1,class:"position-absolute top-50 start-50 translate-middle"};var Re=Object(n["l"])({__name:"HomeView",setup(e){const{wallet:t}=h();return(e,c)=>Object(n["J"])(t)?(Object(n["z"])(),Object(n["g"])("div",Ke,[Object(n["k"])(Te),Object(n["k"])(fe)])):(Object(n["z"])(),Object(n["g"])("div",Me," Connect your wallet to view and add to reading list! "))}});const Je=Re;var Ue=Je;const qe=[{path:"/",name:"Home",component:Ue},{path:"/about",name:"About",component:()=>c.e("about").then(c.bind(null,"d7a9"))}],Be=Object(U["a"])({history:Object(U["b"])("/chapter-one-reading-list/"),routes:qe});var Ne=Be;async function Ie(e=[]){const{program:t}=h(),c=await t.value.account.article.all(e);return c.map(e=>new I(e.publicKey,e.account))}var Ye=Object(q["a"])({state:{articles:[]},getters:{getArticles(e){return e.articles}},mutations:{addArticle(e,t){e.articles.push(t)},setArticles(e,t){e.articles=t},deleteArticle(e,t){const c=e.articles.indexOf(t);e.articles.splice(c)}},actions:{async loadArticles({commit:e}){const t=await Ie();e("setArticles",t)}},modules:{}});c("4373"),c("abe2"),c("7b17");Object(n["d"])(J).use(Ye).use(Ne).mount("#app")}});
//# sourceMappingURL=app.79d55349.js.map