(function(e){function t(t){for(var n,i,l=t[0],o=t[1],s=t[2],u=0,d=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,s||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],n=!0,i=1;i<c.length;i++){var o=c[i];0!==a[o]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=c[0]))}return e}var n={},a={app:0},r=[];function i(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e3ef8ff7"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.e=function(e){var t=[],c=a[e];if(0!==c)if(c)t.push(c[2]);else{var n=new Promise((function(t,n){c=a[e]=[t,n]}));t.push(c[2]=n);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.src=i(e);var s=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(u);var c=a[e];if(0!==c){if(c){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",s.name="ChunkLoadError",s.type=n,s.request=r,c[1](s)}a[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(c,n,function(t){return e[t]}.bind(null,n));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/chapter-one-reading-list/",l.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var b=s;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},1727:function(e,t,c){e.exports=c.p+"img/twitter-logo.7571ea13.png"},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5e62":function(e,t,c){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},abe2:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=c("5a0c"),r=c.n(a),i=c("7b17"),l=c("313d"),o=c("3b13"),s=c("64b9"),u=c("c657");const b={version:"0.1.0",name:"chapter_one_reading_list",instructions:[{name:"addArticle",accounts:[{name:"article",isMut:!0,isSigner:!0},{name:"collector",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"link",type:"string"}]},{name:"deleteArticle",accounts:[{name:"article",isMut:!0,isSigner:!1},{name:"collector",isMut:!0,isSigner:!0}],args:[]}],accounts:[{name:"article",type:{kind:"struct",fields:[{name:"collector",type:"publicKey"},{name:"timestamp",type:"i64"},{name:"link",type:"string"}]}}],errors:[{code:6e3,name:"ArticleLinkTooLong",msg:"The provided article link should be 200 characters long maximum."},{code:6001,name:"MissingArticleLink",msg:"An article link must be provided."}]};var d;const p=new s["PublicKey"](null!==(d="2Nn7j2iepkGYBXaRgiq5fHvkqLS9rvMvSBNpGHBavHgu")&&void 0!==d?d:"");let j;const O="https://api.devnet.solana.com",m="processed",h="processed";function g(){return j}const v=()=>{const e=Object(l["c"])(),t=new s["Connection"](O,h),c=Object(n["c"])(()=>new u["a"](t,e.value,{preflightCommitment:m,commitment:h})),a=Object(n["c"])(()=>new u["b"](b,p,c.value));j={wallet:e,connection:t,provider:c,program:a}};function f(e){const t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;return t.test(e)}c("caad");const y=["5bobMwjqaaydwBa3xSKLqLJjpZhJk11H3c8GtTcnsFca","BekMq8zX8meDMUzFViGU6PWhoDmVZfgbkiJQYirfrL55"];function k(e){return y.includes(e.publicKey.toString())}const w={class:"navbar navbar-expand-md bg-light"},A={class:"container-fluid"},x=Object(n["h"])("a",{class:"navbar-brand",href:"#"},"Chapter One Reading List",-1),K=Object(n["h"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#menu","aria-controls":"menu","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(n["h"])("i",{class:"fa-solid fa-bars"})],-1),L={class:"collapse navbar-collapse justify-content-md-between",id:"menu"},_={class:"navbar-nav d-flex"},S=Object(n["j"])("Home"),P=Object(n["j"])("About"),T={class:"d-none d-md-flex"},C=Object(n["h"])("i",{class:"fa-regular fa-exclamation"},null,-1),M=[C],R={class:"d-md-none"},q=Object(n["h"])("i",{class:"fa-regular fa-exclamation"},null,-1),I=[q],H={class:"container-fluid"},U={class:"position-fixed bottom-0 bg-light container-fluid d-flex justify-content-between"},B={class:"p-0 m-0 pt-2"},G=Object(n["h"])("a",{href:"https://chapterone.com/"},"chapterone.com",-1),Y=Object(n["i"])('<nav class="nav"><a href="https://github.com/chapter-one-dev/chapter-one-reading-list" class="nav-link"><i class="fa-brands fa-github"></i></a><a href="https://twitter.com/chapterone" class="nav-link"><i class="fa-brands fa-twitter"></i></a></nav>',1);var z=Object(n["l"])({__name:"App",setup(e){const t=[new o["PhantomWalletAdapter"],new o["SolflareWalletAdapter"]];Object(l["b"])({wallets:t,autoConnect:!0}),v();const{wallet:c}=g(),a=Object(n["c"])(()=>!(!c||!c.value)&&k(c.value)),s=r()().year();return Object(n["x"])(()=>{if(!a.value){const e=document.querySelectorAll(".wallet-alert");console.log(e);[...e].map(e=>i["a"].getOrCreateInstance(e))}}),(e,t)=>{const c=Object(n["G"])("router-link"),r=Object(n["G"])("router-view");return Object(n["A"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("header",null,[Object(n["h"])("nav",w,[Object(n["h"])("div",A,[x,K,Object(n["h"])("div",L,[Object(n["h"])("div",_,[Object(n["k"])(c,{to:"/",class:"nav-link"},{default:Object(n["O"])(()=>[S]),_:1}),Object(n["k"])(c,{to:"/about",class:"nav-link"},{default:Object(n["O"])(()=>[P]),_:1})]),Object(n["h"])("div",T,[Object(n["h"])("span",{class:Object(n["s"])(["position-absolute z-100 top-0 bg-danger rounded-circle px-2 wallet-alert",{invisible:Object(n["K"])(a)}]),"data-bs-toggle":"tooltip","data-bs-placement":"left",title:"You can't add articles to the reading list"},M,2),Object(n["k"])(Object(n["K"])(l["a"]))])])])]),Object(n["h"])("div",R,[Object(n["h"])("span",{class:Object(n["s"])(["position-absolute bg-danger rounded-circle px-2 wallet-alert",{invisible:Object(n["K"])(a)}]),style:{top:"3rem",left:"8.5rem"},"data-bs-toggle":"tooltip","data-bs-placement":"right",title:"You can't add articles to the reading list"},I,2),Object(n["k"])(Object(n["K"])(l["a"]))])]),Object(n["h"])("main",H,[Object(n["k"])(r)]),Object(n["h"])("footer",U,[Object(n["h"])("p",B,[Object(n["j"])("Â© "+Object(n["I"])(Object(n["K"])(s))+" ",1),G]),Y])],64)}}});c("d980");const D=z;var J=D,V=c("6605"),E=c("5502"),N=c("4208"),Q=c.n(N);r.a.extend(Q.a);class Z{constructor(e,t){this.publicKey=e,this.collector=t.collector,this.timestamp=r.a.unix(parseInt(t.timestamp.toString())),this.link=t.link}get key(){return this.publicKey.toBase58()}get collector_display(){const e=this.collector.toBase58();return e.slice(0,4)+".."+e.slice(-4)}get added_date(){return this.timestamp.format("MMM D, YYYY")}get created_ago(){return this.timestamp.fromNow()}}var F=c("1727"),W=c.n(F);const X={key:0,class:"card-body"},$=["src","alt"],ee={key:1,class:"card-img-top",src:W.a,alt:"Twitter Article"},te={class:"card-body"},ce={key:0,class:"card-title"},ne={key:1,class:"card-title"},ae={key:2,class:"card-title"},re={key:3,class:"card-text"},ie={key:1};function le(e,t,c,a,r,i){return e.response&&e.validURL?(Object(n["A"])(),Object(n["g"])("div",X,[e.response.image?(Object(n["A"])(),Object(n["g"])("img",{key:0,class:"card-img-top",src:e.response.image,alt:e.response.title},null,8,$)):"twitter"==e.altImage?(Object(n["A"])(),Object(n["g"])("img",ee)):Object(n["f"])("",!0),Object(n["h"])("div",te,[e.response.title?(Object(n["A"])(),Object(n["g"])("h3",ce,Object(n["I"])(e.response.title),1)):"twitter"===e.altTitle?(Object(n["A"])(),Object(n["g"])("h3",ne,"Thread by @"+Object(n["I"])(e.getTwitterHandle(e.link)),1)):(Object(n["A"])(),Object(n["g"])("h3",ae,Object(n["I"])(e.link),1)),e.response.description?(Object(n["A"])(),Object(n["g"])("p",re,Object(n["I"])(e.response.description),1)):Object(n["f"])("",!0)])])):(Object(n["A"])(),Object(n["g"])("div",ie,"Loading Preview"))}var oe=Object(n["l"])({name:"ArticleCard",props:{apiURL:{type:String,default:"https://link-prevue-api-v2.herokuapp.com/preview/"},link:{type:String,required:!0}},watch:{url:function(){this.response=null,this.getLinkPreview()}},created(){this.getLinkPreview()},data(){return{response:null,validURL:!1}},computed:{altImage(){return this.response&&!this.response.image?this.link.includes("https://twitter.com")?"twitter":"":void 0},altTitle(){return this.response&&!this.response.image?this.link.includes("https://twitter.com")?"twitter":"":void 0}},methods:{getTwitterHandle(e){const t=e.slice("https://twitter.com/".length),c=t.split("/");return c[0]},checkValidURL(e){return this.validURL=f(e),this.validURL},getLinkPreview(){this.checkValidURL(this.link)&&this.httpRequest(e=>{this.response=JSON.parse(e)},()=>{this.response=null,this.validURL=!1})},httpRequest(e,t){const c=new XMLHttpRequest,n="url="+this.link;c.open("POST",this.apiURL,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&e(c.responseText),4===c.readyState&&500===c.status&&t()},c.send(n)}}}),se=c("6b0d"),ue=c.n(se);const be=ue()(oe,[["render",le]]);var de=be;async function pe(e){const{wallet:t,program:c}=g(),n={article:e.publicKey,collector:t.value.publicKey,systemProgram:c.value.programId};try{await c.value.methods.deleteArticle().accounts(n).rpc()}catch(a){return console.log(a),!1}return!0}const je={class:"card"},Oe={class:"card-body"},me=["href"],he=["href"],ge=Object(n["l"])({name:"ArticleCard",props:{article:{type:Z,required:!0}},components:{LinkPreview:de},methods:{async deleteThisArticle(){const e=await pe(this.article);return this.remove(this.article),e},...Object(E["b"])({remove:"deleteArticle"})}});var ve=Object(n["l"])({...ge,setup(e){const{wallet:t}=g();return(e,c)=>(Object(n["A"])(),Object(n["g"])("div",je,[Object(n["k"])(de,{link:e.article.link},null,8,["link"]),Object(n["h"])("div",Oe,[Object(n["h"])("a",{href:e.article.link,class:"btn btn-secondary",target:"_blank"},"Go to article!",8,me),Object(n["h"])("p",null,[Object(n["j"])("Added "+Object(n["I"])(e.article.created_ago)+" by ",1),Object(n["h"])("a",{href:`https://explorer.solana.com/address/${e.article.collector.toString()}?cluster=devnet`},Object(n["I"])(e.article.collector_display),9,he)]),Object(n["K"])(t)&&Object(n["K"])(t).publicKey&&Object(n["K"])(t).publicKey.toBase58()==e.article.collector.toBase58()?(Object(n["A"])(),Object(n["g"])("button",{key:0,onClick:c[0]||(c[0]=(...t)=>e.deleteThisArticle&&e.deleteThisArticle(...t)),class:"btn btn-danger"}," Delete Article ")):Object(n["f"])("",!0)])]))}});const fe=ve;var ye=fe;const ke={class:"container mt-4"},we={key:0},Ae={key:1,class:"row justify-content-evenly"};var xe=Object(n["l"])({__name:"ArticleGrid",setup(e){const t=Object(E["c"])(),c=Object(n["D"])(!0);t.dispatch("loadArticles").finally(()=>c.value=!1);const a=Object(n["c"])(()=>{const e=t.getters.getArticles;return console.log(e),e.slice(0).sort((e,t)=>t.timestamp.millisecond()-e.timestamp.millisecond())});return(e,t)=>(Object(n["A"])(),Object(n["g"])("section",ke,[c.value?(Object(n["A"])(),Object(n["g"])("div",we,"Loading articles...")):(Object(n["A"])(),Object(n["g"])("div",Ae,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(Object(n["K"])(a),e=>(Object(n["A"])(),Object(n["g"])("div",{key:e.publicKey.toBase58(),class:"col-md-4"},[Object(n["k"])(ye,{article:e},null,8,["article"])]))),128))]))]))}});const Ke=xe;var Le=Ke;async function _e(e){var t;const{wallet:c,program:n}=g(),a=u["c"].Keypair.generate();await n.value.methods.addArticle(e).accounts({collector:null===(t=c.value)||void 0===t?void 0:t.publicKey,article:a.publicKey,systemProgram:u["c"].SystemProgram.programId}).signers([a]).rpc();const r=await n.value.account.article.fetch(a.publicKey);return new Z(a.publicKey,r)}const Se={class:"container"},Pe={class:"col m-5"},Te={class:"input-group flex-nowrap"},Ce=Object(n["h"])("label",{for:"link",class:"input-group-text"},"Link",-1),Me={class:"row"},Re=["onClick"],qe=["onClick","disabled"],Ie=["onClick"],He={key:0,class:"col-4"};var Ue=Object(n["l"])({__name:"AddArticleForm",setup(e){const t=Object(E["c"])(),c=Object(n["D"])(""),a=Object(n["D"])(!1),r=Object(n["c"])(()=>f(c.value));async function i(){const e=await _e(c.value);c.value="",t.commit("addArticle",e)}function l(){a.value=!a.value}return(e,t)=>(Object(n["A"])(),Object(n["g"])("div",Se,[Object(n["h"])("form",Pe,[Object(n["h"])("div",Te,[Ce,Object(n["P"])(Object(n["h"])("input",{id:"link",class:"form-control",placeholder:"https://mirror.xyz/","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e)},null,512),[[n["L"],c.value]])]),Object(n["h"])("div",Me,[Object(n["h"])("button",{class:"btn btn-primary col m-2",onClick:Object(n["Q"])(i,["prevent"])},"Add Article",8,Re),a.value?(Object(n["A"])(),Object(n["g"])("button",{key:1,class:"btn btn-secondary col m-2",onClick:Object(n["Q"])(l,["prevent"])},"Hide Preview",8,Ie)):(Object(n["A"])(),Object(n["g"])("button",{key:0,class:"btn btn-secondary col m-2",onClick:Object(n["Q"])(l,["prevent"]),disabled:!Object(n["K"])(r)},"Show Preview",8,qe))])]),a.value?(Object(n["A"])(),Object(n["g"])("aside",He,[Object(n["k"])(de,{link:c.value},null,8,["link"])])):Object(n["f"])("",!0)]))}});const Be=Ue;var Ge=Be;const Ye={key:0},ze={key:1,class:"position-absolute top-50 start-50 translate-middle"};var De=Object(n["l"])({__name:"HomeView",setup(e){const{wallet:t}=g(),c=Object(n["c"])(()=>!(!t||!t.value)&&k(t.value));return(e,a)=>Object(n["K"])(t)?(Object(n["A"])(),Object(n["g"])("div",Ye,[Object(n["K"])(c)?(Object(n["A"])(),Object(n["e"])(Ge,{key:0})):Object(n["f"])("",!0),Object(n["k"])(Le)])):(Object(n["A"])(),Object(n["g"])("div",ze," Connect your wallet to view and add to reading list! "))}});const Je=De;var Ve=Je;const Ee=[{path:"/",name:"Home",component:Ve},{path:"/about",name:"About",component:()=>c.e("about").then(c.bind(null,"d7a9"))}],Ne=Object(V["a"])({history:Object(V["b"])("/chapter-one-reading-list/"),routes:Ee});var Qe=Ne;async function Ze(e=[]){const{program:t}=g(),c=await t.value.account.article.all(e);return c.map(e=>new Z(e.publicKey,e.account))}var Fe=Object(E["a"])({state:{articles:[]},getters:{getArticles(e){return e.articles}},mutations:{addArticle(e,t){e.articles.push(t)},setArticles(e,t){e.articles=t},deleteArticle(e,t){const c=e.articles.indexOf(t);e.articles.splice(c)}},actions:{async loadArticles({commit:e}){const t=await Ze();e("setArticles",t)}},modules:{}});c("4373"),c("abe2");Object(n["d"])(J).use(Fe).use(Qe).mount("#app")},d980:function(e,t,c){"use strict";c("5e62")}});
//# sourceMappingURL=app.f402049b.js.map